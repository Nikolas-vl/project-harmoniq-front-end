import{f as w,j as a,L as j,r as o,i as v}from"./index-DEUg0kep.js";import{S as f}from"./camera-DWiAhP8M.js";import{u as P}from"./useGetAllUsers-RJE4HdmB.js";import{u as k}from"./useSyncQueryParams-mmjIkPEi.js";import"./usersApi-BJW85QLg.js";const L="_wrapper_10awu_3",M="_title_10awu_8",A="_list_10awu_16",S="_authorItem_10awu_26",I="_avatar_10awu_44",b="_unknown_avatar_10awu_52",E="_name_10awu_65",C="_name_m_10awu_79",U="_loadMore_10awu_91",s={wrapper:L,title:M,list:A,authorItem:S,avatar:I,unknown_avatar:b,name:E,name_m:C,loadMore:U},h=18,y=({id:r,name:e,avatar:t})=>{const i=w(),m=()=>{i(`/authors/${r}`)},u=e.length>h?e.slice(0,h)+"...":e;return a.jsxs("li",{className:s.authorItem,onClick:m,children:[a.jsx("img",{src:t,alt:e,className:s.avatar}),a.jsx("p",{className:s.name,children:u})]})},F=({authors:r,loading:e})=>r.length===0&&!e?a.jsxs(j,{to:"/",className:s.authorItem,children:[a.jsx(f,{className:s.unknown_avatar}),a.jsx("span",{className:s.name_m,children:"No authors available"})]}):a.jsx("ul",{className:s.list,children:r.map(t=>a.jsx(y,{id:t._id,name:t.name,avatar:t.avatarUrl},t._id))}),Q=()=>{const[r,e]=o.useState(null),[t,i]=o.useState(null),[m,u]=o.useState([]),[_]=v(),{users:c,paginationData:p,isLoading:l,queryParams:g}=P(r,t);o.useEffect(()=>{const n=Number(_.get("page"))||1,N=Number(_.get("perPage"))||20;e(n),i(N)},[]),k(g),o.useEffect(()=>{c&&c.length>0&&u(n=>[...n,...c])},[c]);const d=p?.hasNextPage,x=()=>{!l&&d&&e(n=>n+1)};return a.jsx("section",{className:s.wrapper,children:a.jsx("div",{className:"container",children:a.jsxs("div",{className:s.contentBlock,children:[a.jsx("h2",{className:s.title,children:"Authors"}),a.jsx(F,{authors:m,loading:l}),d&&a.jsx("button",{className:s.loadMore,onClick:x,disabled:l,children:l?"Loading...":"Load More"})]})})})};export{Q as default};
