import{r as t,a as L,d as C,j as e,V as p}from"./index-D3h8lwcF.js";import{u as T}from"./useGetAllUsers-xnZQ0_LB.js";import{g as D}from"./usersApi-C5455qMm.js";import{u as N}from"./useSaveArticle-DWOma6Hn.js";import{T as k}from"./TestNav-SL-ajqS2.js";const E=i=>{const[l,n]=t.useState(null),[g,d]=t.useState([]),[h,c]=t.useState(!1);return t.useEffect(()=>{if(!i)return;(async()=>{c(!0);try{const r=await D(i);n(r.data.data.user),d(r.data.data.userArticles)}catch(r){console.error("Failed to fetch user info:",r)}finally{c(!1)}})()},[i]),{user:l,userArticles:g,isLoading:h}},V=()=>{const[i,l]=t.useState(1),[n,g]=t.useState(20),d=L(C),{users:h,isLoading:c,paginationData:a}=T(i,n),[r,j]=t.useState(""),[x,m]=t.useState(""),[o,f]=t.useState(""),[v,U]=t.useState(""),{user:u,userArticles:I,isLoading:y}=E(v),{saveArticle:A,isLoading:S}=N(),b=async()=>{if(!(!r||!x))try{await A(r,x),p.success("Article saved!")}catch{p.error("Error saving article.")}},P=()=>{o&&U(o)};return e.jsxs("div",{style:{padding:"1rem"},children:[e.jsx(k,{}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("input",{placeholder:"User ID",value:r,onChange:s=>j(s.target.value)}),e.jsx("input",{placeholder:"Article ID",value:x,onChange:s=>m(s.target.value)}),e.jsx("button",{onClick:b,disabled:S,children:"Save Article"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("input",{placeholder:"User ID",value:o,onChange:s=>f(s.target.value)}),e.jsx("button",{onClick:P,disabled:!o,children:"Get User By ID"})]})]}),e.jsxs("p",{children:["Ur user id is ",d||"ur not loggin"]}),e.jsxs("div",{style:{marginTop:"2rem"},children:[e.jsxs("details",{children:[e.jsxs("summary",{style:{fontWeight:"bold"},children:["All Users (page ",a?.page||1," of"," ",a?.totalPages||1,")"]}),c?e.jsx("p",{children:"Loading users..."}):e.jsxs(e.Fragment,{children:[e.jsx("ul",{children:h.map(s=>e.jsxs("li",{children:[s.name," (",s._id,")"]},s._id))}),e.jsxs("div",{style:{marginTop:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>l(s=>Math.max(s-1,1)),disabled:!a?.hasPreviousPage,children:"Prev"}),e.jsxs("label",{children:["Users per page:"," ",e.jsx("select",{value:n,onChange:s=>g(Number(s.target.value)),children:[6,12,24,48].map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsx("button",{onClick:()=>l(s=>Math.min(s+1,a?.totalPages||s+1)),disabled:!a?.hasNextPage,children:"Next"})]})]})]}),e.jsx("h3",{children:"User Info"}),y?e.jsx("p",{children:"Loading user info..."}):u&&e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",u.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Saved:"})," ",Array.isArray(u.saved)?u.saved.join(", "):""]}),e.jsx("h4",{children:"Articles:"}),e.jsx("ul",{children:I.map(s=>e.jsx("li",{children:s.title},s._id))})]})]})]})};export{V as default};
