import{r as t,a as P,d as C,j as e,V as j}from"./index-DNUY4YCF.js";import{g as D,a as T,u as E}from"./useSaveArticle-CCdr7kmW.js";import{T as N}from"./TestNav-BQAgKJki.js";const k=(a=1,i=20)=>{const[l,u]=t.useState([]),[c,g]=t.useState(null),[d,r]=t.useState(!1);return t.useEffect(()=>{(async()=>{r(!0);try{const o=await D({page:a,perPage:i});u(o.data.data.users),g(o.data.data.paginationData)}catch(o){console.error("Failed to fetch users:",o)}finally{r(!1)}})()},[a,i]),{users:l,paginationData:c,isLoading:d,queryParams:{page:a,perPage:i}}},w=a=>{const[i,l]=t.useState(null),[u,c]=t.useState([]),[g,d]=t.useState(!1);return t.useEffect(()=>{if(!a)return;(async()=>{d(!0);try{const n=await T(a);l(n.data.data.user),c(n.data.data.userArticles)}catch(n){console.error("Failed to fetch user info:",n)}finally{d(!1)}})()},[a]),{user:i,userArticles:u,isLoading:g}},M=()=>{const[a,i]=t.useState(1),[l,u]=t.useState(20),c=P(C),{users:g,isLoading:d,paginationData:r}=k(a,l),[n,o]=t.useState(""),[p,f]=t.useState(""),[h,m]=t.useState(""),[v,U]=t.useState(""),{user:x,userArticles:y,isLoading:I}=w(v),{saveArticle:S,isLoading:A}=E(),b=async()=>{if(!(!n||!p))try{await S(n,p),j.success("Article saved!")}catch{j.error("Error saving article.")}},L=()=>{h&&U(h)};return e.jsxs("div",{style:{padding:"1rem"},children:[e.jsx(N,{}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("input",{placeholder:"User ID",value:n,onChange:s=>o(s.target.value)}),e.jsx("input",{placeholder:"Article ID",value:p,onChange:s=>f(s.target.value)}),e.jsx("button",{onClick:b,disabled:A,children:"Save Article"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("input",{placeholder:"User ID",value:h,onChange:s=>m(s.target.value)}),e.jsx("button",{onClick:L,disabled:!h,children:"Get User By ID"})]})]}),e.jsxs("p",{children:["Ur user id is ",c||"ur not loggin"]}),e.jsxs("div",{style:{marginTop:"2rem"},children:[e.jsxs("details",{children:[e.jsxs("summary",{style:{fontWeight:"bold"},children:["All Users (page ",r?.page||1," of"," ",r?.totalPages||1,")"]}),d?e.jsx("p",{children:"Loading users..."}):e.jsxs(e.Fragment,{children:[e.jsx("ul",{children:g.map(s=>e.jsxs("li",{children:[s.name," (",s._id,")"]},s._id))}),e.jsxs("div",{style:{marginTop:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>i(s=>Math.max(s-1,1)),disabled:!r?.hasPreviousPage,children:"Prev"}),e.jsxs("label",{children:["Users per page:"," ",e.jsx("select",{value:l,onChange:s=>u(Number(s.target.value)),children:[6,12,24,48].map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsx("button",{onClick:()=>i(s=>Math.min(s+1,r?.totalPages||s+1)),disabled:!r?.hasNextPage,children:"Next"})]})]})]}),e.jsx("h3",{children:"User Info"}),I?e.jsx("p",{children:"Loading user info..."}):x&&e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",x.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Saved:"})," ",Array.isArray(x.saved)?x.saved.join(", "):""]}),e.jsx("h4",{children:"Articles:"}),e.jsx("ul",{children:y.map(s=>e.jsx("li",{children:s.title},s._id))})]})]})]})};export{M as default};
