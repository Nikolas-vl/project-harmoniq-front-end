import{r as d,j as e}from"./index-DNUY4YCF.js";import{g as j}from"./articlesApi-CVAu_ZxT.js";import{u}from"./useGetArticleById-CvdPzfw_.js";import{T as f}from"./TestNav-BQAgKJki.js";const y=(s=1,i=12,l="all")=>{const[x,r]=d.useState([]),[n,h]=d.useState(null),[o,c]=d.useState(!1);return d.useEffect(()=>{(async()=>{c(!0);try{const g=await j({page:s,perPage:i,filter:l});r(g.data.data.articles),h(g.data.data.paginationData)}catch(g){console.error("Failed to fetch articles:",g)}finally{c(!1)}})()},[l,s,i]),{articles:x,pagination:n,isLoading:o,queryParams:{page:s,perPage:i,filter:l}}};function b(s,i,l=5){const x=Math.floor(l/2);let r=Math.max(1,s-x),n=r+l-1;n>i&&(n=i,r=Math.max(1,n-l+1));const h=[];for(let o=r;o<=n;o++)h.push(o);return h}const L=()=>{const[s,i]=d.useState(1),[l,x]=d.useState(12),[r,n]=d.useState(""),{articles:h,pagination:o,isLoading:c}=y(s,l),{article:a,isLoading:g}=u(r);console.log("article:",a);const m=o?.totalPages||1,p=b(s,m,5);return e.jsxs("div",{style:{padding:"1rem"},children:[e.jsx(f,{}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",alignItems:"center",flexWrap:"wrap",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("input",{placeholder:"Article ID",value:r,onChange:t=>n(t.target.value)}),e.jsx("button",{disabled:!r.trim(),children:"Get Article By ID"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("button",{onClick:()=>i(t=>Math.max(t-1,1)),disabled:s===1||c,children:"Prev"}),p.map(t=>e.jsx("button",{onClick:()=>i(t),disabled:t===s||c,style:{fontWeight:t===s?"bold":"normal",padding:"6px 10px"},children:t},t)),e.jsx("button",{onClick:()=>i(t=>Math.min(t+1,m)),disabled:s===m||c,children:"Next"}),e.jsxs("label",{style:{marginLeft:"1rem"},children:["Per page:"," ",e.jsx("select",{value:l,onChange:t=>{x(Number(t.target.value)),i(1)},disabled:c,children:[6,12,24,48].map(t=>e.jsx("option",{value:t,children:t},t))})]})]})]}),e.jsxs("div",{children:[c?e.jsx("p",{children:"Loading articles..."}):e.jsxs("details",{children:[e.jsx("summary",{style:{fontWeight:"bold"},children:"All Articles"}),e.jsx("ul",{children:h.map(t=>e.jsxs("li",{children:[e.jsxs("p",{children:[" ",t.title]}),e.jsx("p",{children:t._id})]},t._id||t.title))})]}),e.jsx("h3",{children:"Selected Article"}),g?e.jsx("p",{children:"Loading article..."}):a&&e.jsxs("details",{style:{marginTop:"1rem"},children:[e.jsx("summary",{style:{fontWeight:"bold",cursor:"pointer"},children:a.title}),e.jsxs("div",{style:{marginTop:"0.5rem"},children:[e.jsx("img",{src:a.img,alt:a.title,style:{maxWidth:"100%",height:"auto",marginBottom:"1rem"}}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",a.desc]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(a.date).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Rate:"})," ",a.rate]}),e.jsx("p",{style:{whiteSpace:"pre-line",marginTop:"1rem"},children:a.article})]})]})]})]})};export{L as default};
