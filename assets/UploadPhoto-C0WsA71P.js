import{r as l,f as v,a as x,d as w,j as e}from"./index-FuH_kWGc.js";import{u as _}from"./usersApi-xHuqhiyv.js";const j="_form_6u718_3",P="_closeBtn_6u718_13",C="_mainText_6u718_23",N="_fileInputWrapper_6u718_28",U="_preview_6u718_59",y="_error_6u718_65",B="_saveBtn_6u718_71",t={form:j,closeBtn:P,mainText:C,fileInputWrapper:N,preview:U,error:y,saveBtn:B},L="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1.25%201.25L8%208M8%208L1.25%2014.75M8%208L14.75%2014.75M8%208L14.75%201.25'%20stroke='%23070721'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",S="data:image/svg+xml,%3csvg%20width='72'%20height='61'%20viewBox='0%200%2072%2061'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M49.2452%2034.9303C49.2452%2041.0472%2043.3151%2046.006%2036%2046.006C28.6849%2046.006%2022.7548%2041.0472%2022.7548%2034.9303C22.7548%2028.8133%2028.6849%2023.8545%2036%2023.8545C43.3151%2023.8545%2049.2452%2028.8133%2049.2452%2034.9303Z'%20stroke='%23070707'%20stroke-width='2'/%3e%3cpath%20d='M1.5625%2050.2031L1.5625%2023.2082C1.5625%2018.6716%205.96049%2014.994%2011.3857%2014.994C15.1064%2014.994%2018.5078%2013.2361%2020.1718%2010.4533L22.3981%206.73002C24.2402%203.6492%2028.0058%201.70311%2032.125%201.70313L39.8751%201.70315C43.9942%201.70316%2047.7598%203.64925%2049.6019%206.73006L51.8282%2010.4533C53.4922%2013.2362%2056.8936%2014.994%2060.6143%2014.994C66.0395%2014.994%2070.4375%2018.6717%2070.4375%2023.2082V50.2031C70.4375%2055.2254%2065.5686%2059.2968%2059.5625%2059.2968H12.4375C6.4314%2059.2968%201.5625%2055.2254%201.5625%2050.2031Z'%20stroke='%23070707'%20stroke-width='2'/%3e%3c/svg%3e",b=()=>{const[i,r]=l.useState(!1),[p,c]=l.useState(null);return{updateProfile:async(u,o)=>{r(!0);try{const a=await _(u,o);return c(a.data),r(!1),a.data}catch(a){r(!1),console.error("Failed to update profile",a)}},loading:i,data:p}},I=()=>{const i=v(),r=x(w),{updateProfile:p,loading:c}=b(),[d,u]=l.useState(null),[o,a]=l.useState(null),[h,n]=l.useState(""),g=m=>{const s=m.target.files[0];if(s){if(s.size>2*1024*1024){n("The file is too large. Maximum 2MB.");return}if(!["image/jpeg","image/png"].includes(s.type)){n("Only JPG and PNG images are allowed.");return}n(""),a(s),u(URL.createObjectURL(s))}},f=async m=>{if(m.preventDefault(),!o){n("Please select a photo");return}try{await p(r,{image:o}),i("/")}catch(s){n("Upload failed. Please try again."),console.error(s)}};return e.jsx("div",{className:`container ${t.wrapper}`,children:e.jsxs("form",{onSubmit:f,className:t.form,children:[e.jsx("button",{type:"button",className:t.closeBtn,onClick:()=>i(-1),children:e.jsx("img",{src:L,alt:"close",className:t.icon})}),e.jsx("h2",{className:t.mainText,children:"Upload your photo"}),e.jsxs("label",{htmlFor:"photo",className:t.fileInputWrapper,children:[d?e.jsx("img",{src:d,alt:"Preview",className:t.preview}):e.jsx("img",{src:S,alt:"camera",className:t.icon}),e.jsx("input",{id:"photo",name:"image",type:"file",accept:"image/*",onChange:g,className:t.fileInput})]}),h&&e.jsx("div",{className:t.error,children:h}),e.jsx("button",{type:"submit",className:t.saveBtn,disabled:!o||c,children:c?"Uploading...":"Save"})]})})},k="_uploadPhotoWrapper_7eqca_1",M={uploadPhotoWrapper:k},T=()=>e.jsx("div",{className:`container ${M.uploadPhotoWrapper}`,children:e.jsx(I,{})});export{T as default};
