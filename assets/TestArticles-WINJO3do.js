import{r as o,j as e}from"./index-UrZ7usYT.js";import{g as u,a as j}from"./articlesApi-BIaqBaDU.js";import{T as f}from"./TestNav-C4WFLblB.js";const y=(s=1,r=12)=>{const[l,h]=o.useState([]),[n,d]=o.useState(null),[i,c]=o.useState(!1);return o.useEffect(()=>{(async()=>{c(!0);try{const a=await u({page:s,perPage:r});h(a.data.articles),d(a.data.paginationData)}catch(a){console.error("Failed to fetch articles:",a)}finally{c(!1)}})()},[s,r]),{articles:l,pagination:n,isLoading:i}},b=s=>{const[r,l]=o.useState(null),[h,n]=o.useState(!1);return o.useEffect(()=>{if(!s)return;(async()=>{n(!0);try{const i=await j(s);l(i.data.article)}catch(i){console.error("Failed to fetch article:",i)}finally{n(!1)}})()},[s]),{article:r,isLoading:h}};function A(s,r,l=5){const h=Math.floor(l/2);let n=Math.max(1,s-h),d=n+l-1;d>r&&(d=r,n=Math.max(1,d-l+1));const i=[];for(let c=n;c<=d;c++)i.push(c);return i}const L=()=>{const[s,r]=o.useState(1),[l,h]=o.useState(12),{articles:n,pagination:d,isLoading:i}=y(s,l),[c,x]=o.useState(""),{article:a,isLoading:p}=b(c),g=d?.totalPages||1,m=A(s,g,5);return e.jsxs("div",{style:{padding:"1rem"},children:[e.jsx(f,{}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",alignItems:"center",flexWrap:"wrap",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("input",{placeholder:"Article ID",value:c,onChange:t=>x(t.target.value)}),e.jsx("button",{disabled:!c.trim(),children:"Get Article By ID"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("button",{onClick:()=>r(t=>Math.max(t-1,1)),disabled:s===1||i,children:"Prev"}),m.map(t=>e.jsx("button",{onClick:()=>r(t),disabled:t===s||i,style:{fontWeight:t===s?"bold":"normal",padding:"6px 10px"},children:t},t)),e.jsx("button",{onClick:()=>r(t=>Math.min(t+1,g)),disabled:s===g||i,children:"Next"}),e.jsxs("label",{style:{marginLeft:"1rem"},children:["Per page:"," ",e.jsx("select",{value:l,onChange:t=>{h(Number(t.target.value)),r(1)},disabled:i,children:[6,12,24,48].map(t=>e.jsx("option",{value:t,children:t},t))})]})]})]}),e.jsxs("div",{children:[i?e.jsx("p",{children:"Loading articles..."}):e.jsxs("details",{children:[e.jsx("summary",{style:{fontWeight:"bold"},children:"All Articles"}),e.jsx("ul",{children:n.map(t=>e.jsxs("li",{children:[e.jsxs("p",{children:[" ",t.title]}),e.jsx("p",{children:t._id})]},t._id||t.title))})]}),e.jsx("h3",{children:"Selected Article"}),p?e.jsx("p",{children:"Loading article..."}):a&&e.jsxs("details",{style:{marginTop:"1rem"},children:[e.jsx("summary",{style:{fontWeight:"bold",cursor:"pointer"},children:a.title}),e.jsxs("div",{style:{marginTop:"0.5rem"},children:[e.jsx("img",{src:a.img,alt:a.title,style:{maxWidth:"100%",height:"auto",marginBottom:"1rem"}}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",a.desc]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(a.date).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Rate:"})," ",a.rate]}),e.jsx("p",{style:{whiteSpace:"pre-line",marginTop:"1rem"},children:a.article})]})]})]})]})};export{L as default};
