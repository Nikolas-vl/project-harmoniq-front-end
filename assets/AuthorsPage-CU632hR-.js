import{f as j,j as s,r as n,i as f}from"./index-CASMP2K8.js";import{u as P}from"./useGetAllUsers-DiwMwZrF.js";import{u as v}from"./useSyncQueryParams-Q6BZassg.js";import"./usersApi-ULSzYgmd.js";const y="_wrapper_1ygi9_3",A="_title_1ygi9_8",M="_list_1ygi9_16",L="_authorItem_1ygi9_26",b="_avatar_1ygi9_44",E="_name_1ygi9_52",I="_loadMore_1ygi9_66",S="_noAuthors_1ygi9_88",e={wrapper:y,title:A,list:M,authorItem:L,avatar:b,name:E,loadMore:I,noAuthors:S},d=18,k=({id:r,name:a,avatar:t})=>{const l=j(),m=()=>{l(`/authors/${r}`)},u=a.length>d?a.slice(0,d)+"...":a;return s.jsxs("li",{className:e.authorItem,onClick:m,children:[s.jsx("img",{src:t,alt:a,className:e.avatar}),s.jsx("p",{className:e.name,children:u})]})},w=({authors:r,loading:a})=>r.length===0&&!a?s.jsx("p",{className:e.noAuthors,children:"No authors available"}):s.jsx("ul",{className:e.list,children:r.map(t=>s.jsx(k,{id:t._id,name:t.name,avatar:t.avatarUrl},t._id))}),q=()=>{const[r,a]=n.useState(null),[t,l]=n.useState(null),[m,u]=n.useState([]),[h]=f(),{users:c,paginationData:_,isLoading:i,queryParams:p}=P(r,t);n.useEffect(()=>{const o=Number(h.get("page"))||1,N=Number(h.get("perPage"))||20;a(o),l(N)},[]),v(p),n.useEffect(()=>{c&&c.length>0&&u(o=>[...o,...c])},[c]);const g=_?.hasNextPage,x=()=>{!i&&g&&a(o=>o+1)};return s.jsx("section",{className:e.wrapper,children:s.jsx("div",{className:"container",children:s.jsxs("div",{className:e.contentBlock,children:[s.jsx("h2",{className:e.title,children:"Authors"}),s.jsx(w,{authors:m,loading:i}),g&&s.jsx("button",{className:e.loadMore,onClick:x,disabled:i,children:i?"Loading...":"Load More"})]})})})};export{q as default};
