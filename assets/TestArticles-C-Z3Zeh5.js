import{r as a,j as e}from"./index-YcYvIZm5.js";import{g as x,a as p}from"./articlesApi-jRIMcapz.js";const u=(s=1)=>{const[c,o]=a.useState([]),[r,n]=a.useState(null),[h,l]=a.useState(!1),d=a.useCallback(async()=>{l(!0);try{const t=await x(s);o(t.data.articles),n(t.data.paginationData)}catch(t){console.error("Failed to fetch articles:",t)}finally{l(!1)}},[s]);return a.useEffect(()=>{d()},[d]),{articles:c,pagination:r,isLoading:h,refetch:d}},j=s=>{const[c,o]=a.useState(null),[r,n]=a.useState(!1);return a.useEffect(()=>{if(!s)return;(async()=>{n(!0);try{const l=await p(s);o(l.data.article)}catch(l){console.error("Failed to fetch article:",l)}finally{n(!1)}})()},[s]),{article:c,isLoading:r}},y=()=>{const[s,c]=a.useState(1),{articles:o,pagination:r,isLoading:n,refetch:h}=u(s),[l,d]=a.useState(""),{article:t,isLoading:g}=j(l);return e.jsxs("div",{style:{padding:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("button",{onClick:h,disabled:n,children:"Get All Articles"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("input",{placeholder:"Article ID",value:l,onChange:i=>d(i.target.value)}),e.jsx("button",{disabled:!l.trim(),children:"Get Article By ID"})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>c(i=>Math.max(i-1,1)),disabled:s===1||n,children:"Prev"}),e.jsxs("span",{children:["Page ",s," of ",r?.totalPages||"?"]}),e.jsx("button",{onClick:()=>c(i=>r?.totalPages?Math.min(i+1,r.totalPages):i+1),disabled:r&&s===r.totalPages||n,children:"Next"})]})]}),e.jsxs("div",{style:{marginTop:"2rem"},children:[e.jsxs("details",{children:[e.jsx("summary",{style:{fontWeight:"bold"},children:"All Articles"}),n?e.jsx("p",{children:"Loading articles..."}):e.jsx("ul",{children:o.map(i=>e.jsxs(e.Fragment,{children:[e.jsx("li",{children:i.title},i.title),e.jsx("li",{children:i._id},i._id)]}))})]}),e.jsx("h3",{children:"Selected Article"}),g?e.jsx("p",{children:"Loading article..."}):t&&e.jsxs("details",{style:{marginTop:"1rem"},children:[e.jsx("summary",{style:{fontWeight:"bold",cursor:"pointer"},children:t.title}),e.jsxs("div",{style:{marginTop:"0.5rem"},children:[e.jsx("img",{src:t.img,alt:t.title,style:{maxWidth:"100%",height:"auto",marginBottom:"1rem"}}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",t.desc]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(t.date).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Rate:"})," ",t.rate]}),e.jsx("p",{style:{whiteSpace:"pre-line",marginTop:"1rem"},children:t.article})]})]})]})]})};export{y as default};
