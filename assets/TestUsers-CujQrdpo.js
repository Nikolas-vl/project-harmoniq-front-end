import{i as j,r as t,j as e,V as v}from"./index-DUV1lPQx.js";const L=({page:s=1,perPage:a=10}={})=>j.get(`/users?page=${s}&perPage=${a}`),b=s=>j.get(`/users/${s}`),C=(s,a)=>j.post(`/users/${s}/save/${a}`),D=(s=1,a=10)=>{const[l,c]=t.useState([]),[o,i]=t.useState(null),[g,d]=t.useState(!1),[r,u]=t.useState(s),x=t.useCallback(async(f=r)=>{d(!0);try{const h=await L({page:f,perPage:a});c(h.data.users),i(h.data.paginationData),u(f)}catch(h){console.error("Failed to fetch users:",h)}finally{d(!1)}},[r,a]);return t.useEffect(()=>{x(r)},[x,r]),{users:l,paginationData:o,isLoading:g,refetch:x,page:r,setPage:u}},P=s=>{const[a,l]=t.useState(null),[c,o]=t.useState([]),[i,g]=t.useState(!1);return t.useEffect(()=>{if(!s)return;(async()=>{g(!0);try{const r=await b(s);l(r.data.user),o(r.data.userArticles)}catch(r){console.error("Failed to fetch user info:",r)}finally{g(!1)}})()},[s]),{user:a,userArticles:c,isLoading:i}},w=()=>{const[s,a]=t.useState(!1);return{saveArticle:async(c,o)=>{a(!0);try{await C(c,o)}catch(i){throw console.error("Failed to save article:",i),i}finally{a(!1)}},isLoading:s}},E=()=>{const{users:s,isLoading:a,paginationData:l,page:c,setPage:o}=D(),[i,g]=t.useState(""),[d,r]=t.useState(""),[u,x]=t.useState(""),[f,h]=t.useState(""),{user:p,userArticles:m,isLoading:y}=P(f),{saveArticle:U,isLoading:I}=w(),A=async()=>{if(!(!i||!d))try{await U(i,d),v("Article saved!")}catch{v("Error saving article.")}},S=()=>{u&&h(u)};return e.jsxs("div",{style:{padding:"1rem"},children:[e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("input",{placeholder:"User ID",value:i,onChange:n=>g(n.target.value)}),e.jsx("input",{placeholder:"Article ID",value:d,onChange:n=>r(n.target.value)}),e.jsx("button",{onClick:A,disabled:I,children:"Save Article"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("input",{placeholder:"User ID",value:u,onChange:n=>x(n.target.value)}),e.jsx("button",{onClick:S,disabled:!u,children:"Get User By ID"})]})]}),e.jsxs("div",{style:{marginTop:"2rem"},children:[e.jsxs("details",{children:[e.jsxs("summary",{style:{fontWeight:"bold"},children:["All Users (page ",l?.page||1," of"," ",l?.totalPages||1,")"]}),a?e.jsx("p",{children:"Loading users..."}):e.jsxs(e.Fragment,{children:[e.jsx("ul",{children:s.map(n=>e.jsxs("li",{children:[n.name," (",n._id,")"]},n._id))}),e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsx("button",{onClick:()=>o(c-1),disabled:!l?.hasPreviousPage,children:"Prev"}),e.jsx("button",{onClick:()=>o(c+1),disabled:!l?.hasNextPage,style:{marginLeft:"0.5rem"},children:"Next"})]})]})]}),e.jsx("h3",{children:"User Info"}),y?e.jsx("p",{children:"Loading user info..."}):p&&e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",p.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Saved:"})," ",p.saved.join(", ")]}),e.jsx("h4",{children:"Articles:"}),e.jsx("ul",{children:m.map(n=>e.jsx("li",{children:n.title},n._id))})]})]})]})};export{E as default};
